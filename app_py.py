# -*- coding: utf-8 -*-
"""app.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1pGmwpF1LNvsF8dYaapudUnOs3OioN9OT
"""

import streamlit as st
import numpy as np
import pickle

# Page config
st.set_page_config(
    page_title="Customer Lifetime Value Predictor",
    layout="wide"
)

# Load model
model = pickle.load(open("clv_model.pkl", "rb"))

# Custom dark style
st.markdown("""
<style>
.main {
    background-color: #0e1117;
    color: white;
}
.block-container {
    padding-top: 2rem;
}
.big-font {
    font-size:30px !important;
    font-weight: bold;
}
.result-box {
    background-color: #0e5f3c;
    padding: 15px;
    border-radius: 8px;
    font-size: 20px;
}
</style>
""", unsafe_allow_html=True)

# Title
st.markdown('<p class="big-font">Customer Lifetime Value Prediction</p>', unsafe_allow_html=True)
st.write("Predict CLV using customer behavior features.")
st.markdown("---")
col1, col2 = st.columns(2)

with col1:
    recency = st.number_input("Recency", min_value=0.0)
    monetary = st.number_input("Monetary", min_value=0.0)
    customer_lifespan = st.number_input("Customer Lifespan", min_value=0.0)

with col2:
    frequency = st.number_input("Frequency", min_value=0.0)
    avg_order_value = st.number_input("Avg Order Value", min_value=0.0)
    active_months = st.number_input("Active Months", min_value=0.0)
    st.markdown("---")

if st.button("Predict CLV"):
    data = np.array([[recency, frequency, monetary,
                      avg_order_value, customer_lifespan, active_months]])
    
    prediction = model.predict(data)

    st.markdown(
        f'<div class="result-box">Predicted CLV: â‚¹ {prediction[0]:,.2f}</div>',
        unsafe_allow_html=True
    )
